<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <title>Tailwind to SenangStart CSS Converter</title>
    <!-- Tailwind CSS for the Tailwind preview -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SenangStart CSS for styling and converted preview -->
    <script src="../dist/senangstart-css.min.js"></script>
    <!-- SenangStart Icons -->
    <script src="https://unpkg.com/@bookklik/senangstart-icons/dist/senangstart-icon.min.js"></script>
  </head>
  <body layout="col" space="min-h:[100vh]" style="font-family: 'Outfit', sans-serif;">
    <!-- Header -->
    <header 
      layout="block"
      space="p-y:big p-x:medium"
      visual="text:center text:white bg-image:gradient-to-r from:sky-500 via:blue-500 to:blue-700"
    >
      <h1 space="m:none m-b:tiny" visual="text-size:huge font:tw-semibold">
        Tailwind <ss-icon icon="arrow-right" thickness="2"></ss-icon> SenangStart CSS Converter
      </h1>
      <p space="m:none" visual="opacity:90">
        Paste Tailwind CSS code on the left, see the converted SenangStart CSS on the right
      </p>
    </header>

    <!-- Options Bar -->
    <div 
      layout="flex items:center justify:center"
      space="p-y:small p-x:medium g:medium"
      visual="bg:gray-50 border-b-w:[1px] border:gray-200"
    >
      <label layout="flex items:center" space="g:tiny" visual="text-size:small text:gray-700 cursor:pointer">
        <input type="checkbox" id="exactMode" />
        <span>Exact Mode (use tw- prefix for numeric scales)</span>
      </label>
      <label layout="flex items:center" space="g:tiny" visual="text-size:small text:gray-700 cursor:pointer">
        <input type="checkbox" id="livePreview" checked />
        <span>Live Preview</span>
      </label>
    </div>

    <!-- Converter Container -->
    <div 
      layout="grid grid-cols:1 lap:grid-cols:2"
      space="g:small p:small m-x:auto"
    >
      <!-- Tailwind Panel -->
      <div layout="col" space="g:small">
        <div 
          layout="flex items:center justify:between"
          space="p-y:small p-x:medium"
          visual="rounded-t:medium text:white font:tw-semibold bg-image:gradient-to-br from:sky-400 to:sky-500"
        >
          <span>Tailwind CSS</span>
          <button 
            onclick="copyInput()"
            space="p-y:tiny p-x:small"
            visual="bg:[rgba(255,255,255,0.2)] border-w:[1px] border:[rgba(255,255,255,0.3)] rounded:small text:white text-size:mini cursor:pointer transition:fast hover:bg:[rgba(255,255,255,0.3)]"
          >Copy</button>
        </div>
        <textarea
          id="tailwindInput"
          placeholder="Paste your Tailwind HTML here..."
          space="w:[100%] h:[200px] p:small"
          visual="border-w:thin border:gray-200 text-size:small bg:gray-50 font:mono resize:y focus:outline:none focus:border:blue-500 focus:shadow:medium"
        ></textarea>
        <div 
          space="min-h:[200px]"
          visual="border-w:thin border:gray-200 bg:white"
        >
          <div 
            space="p:small"
            visual="bg:gray-50 border-b-w:[1px] border:gray-200 text-size:mini font:tw-medium text:gray-500 uppercase tracking:[0.05em]"
          >Tailwind Preview</div>
          <div id="tailwindPreview" space="p:small min-h:[150px]"></div>
        </div>
      </div>

      <!-- SenangStart Panel -->
      <div layout="col" space="g:small">
        <div 
          layout="flex items:center justify:between"
          space="p-y:small p-x:medium"
          visual="rounded-t:medium text:white font:tw-semibold bg-image:gradient-to-br from:blue-400 to:blue-500"
        >
          <span>SenangStart CSS</span>
          <button 
            onclick="copyOutput()"
            space="p-y:tiny p-x:small"
            visual="bg:[rgba(255,255,255,0.2)] border-w:[1px] border:[rgba(255,255,255,0.3)] rounded:small text:white text-size:mini cursor:pointer transition:fast hover:bg:[rgba(255,255,255,0.3)]"
          >Copy</button>
        </div>
        <textarea
          id="senangstartOutput"
          placeholder="Converted SenangStart CSS will appear here..."
          space="w:[100%] h:[200px] p:small"
          visual="border-w:thin border:gray-200 text-size:small bg:gray-50 font:mono resize:y focus:outline:none focus:border:blue-500 focus:shadow:medium"
        ></textarea>
        <div 
          space="min-h:[200px]"
          visual="border-w:thin border:gray-200 bg:white"
        >
          <div 
            space="p:small"
            visual="bg:gray-50 border-b-w:[1px] border:gray-200 text-size:mini font:tw-medium text:gray-500 uppercase tracking:[0.05em]"
          >SenangStart Preview</div>
          <div id="senangstartPreview" space="p:small min-h:[150px]"></div>
        </div>
      </div>
    </div>

    <!-- Status -->
    <div 
      id="status"
      layout="block"
      space="p:tiny"
      visual="text:center text-size:mini text:gray-500"
    ></div>

    <!-- Tailwind Conversion Engine -->
    <script src="../dist/senangstart-tw.js"></script>

    <script>
      // ============================
      // UI LOGIC
      // ============================

      const tailwindInput = document.getElementById("tailwindInput");
      const senangstartOutput = document.getElementById("senangstartOutput");
      const tailwindPreview = document.getElementById("tailwindPreview");
      const senangstartPreview = document.getElementById("senangstartPreview");
      const exactMode = document.getElementById("exactMode");
      const livePreview = document.getElementById("livePreview");
      const status = document.getElementById("status");
      let debounceTimer;

      function convert() {
        const input = tailwindInput.value.trim();
        if (!input) {
          senangstartOutput.value = "";
          tailwindPreview.innerHTML = "";
          senangstartPreview.innerHTML = "";
          status.textContent = "";
          return;
        }

        // Use the external conversion engine
        const converted = SenangStartTW.convertHTML(input, exactMode.checked);
        senangstartOutput.value = converted;

        if (livePreview.checked) {
          tailwindPreview.innerHTML = input;
          senangstartPreview.innerHTML = converted;
          // Trigger SenangStart rescan
          if (window.SenangStart && window.SenangStart.scanAndGenerate) {
            window.SenangStart.scanAndGenerate();
          }
        }

        status.textContent = "Converted successfully!";
        status.setAttribute("visual", "text:center text-size:mini text:emerald-500");
      }

      function debouncedConvert() {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(convert, 300);
      }
      tailwindInput.addEventListener("input", debouncedConvert);
      exactMode.addEventListener("change", convert);
      livePreview.addEventListener("change", convert);

      // Handle manual edits to the SenangStart output
      senangstartOutput.addEventListener("input", () => {
        if (livePreview.checked) {
          senangstartPreview.innerHTML = senangstartOutput.value;
          // Trigger SenangStart rescan
          if (window.SenangStart && window.SenangStart.scanAndGenerate) {
            window.SenangStart.scanAndGenerate();
          }
        }
      });

      window.copyInput = () => {
        navigator.clipboard.writeText(tailwindInput.value);
        status.textContent = "Tailwind code copied!";
        status.setAttribute("visual", "text:center text-size:mini text:emerald-500");
      };
      window.copyOutput = () => {
        navigator.clipboard.writeText(senangstartOutput.value);
        status.textContent = "SenangStart code copied!";
        status.setAttribute("visual", "text:center text-size:mini text:emerald-500");
      };

      // Load example
      tailwindInput.value = `<div class="flex items-center justify-between p-4 bg-blue-500 text-white rounded-lg shadow-lg">
  <h2 class="text-xl font-bold">Hello World</h2>
  <button class="px-4 py-2 bg-white text-blue-500 rounded hover:bg-blue-100">
    Click me
  </button>
</div>`;
      convert();
    </script>
  </body>
</html>
